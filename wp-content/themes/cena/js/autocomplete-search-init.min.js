!function(e){"use strict";jQuery(document).ready(function(e){jQuery("input[name=s]").on("focus",function(){e(this).autocomplete({source:function(a,t){e.ajax({url:cena_settings.ajaxurl+"?callback=?&action=cena_autocomplete_search",dataType:"json",data:{term:a.term,category:this.element.closest("form").find("select").val(),post_type:this.element.closest("form").find(".post_type").val()},success:function(e){t(e)}})},appendTo:e(this).closest("form").find(".tbay-search-result-wrapper"),autoFocus:!0,search:function(a,t){e(a.currentTarget).closest(".tbay-search-form").addClass("load")},select:function(e,a){window.location.href=a.item.link},create:function(){jQuery(this).data("ui-autocomplete")._renderItem=function(e,a){var t="";if(e.addClass(a.style),""!=a.image)t='<a href="'+a.link+'" title="'+a.label+'"><img src="'+a.image+'" ></a>';return t=t+'<div class="group"><div class="name"><a href="'+a.link+'" title="'+a.label+'">'+a.label+"</a></div>",""!=a.price&&(t=t+'<div class="price">'+a.price+"</div></div> "),jQuery("<li>").append(t).appendTo(e)},jQuery(this).data("ui-autocomplete")._renderMenu=function(a,t){var s=this;jQuery.each(t,function(e,t){s._renderItemData(a,t)}),t[0].view_all?a.append(`<li class="list-header ui-menu-item"> ${t[0].result} <a class="search-view-all" href="javascript:void(0)">${cena_settings.view_all}</a></li>`):a.append(`<li class="list-header ui-menu-item"> ${t[0].result} </li>`),e(document.body).trigger("cena_search_view_all")}},response:function(a,t){0===t.content.length?(e(".tbay-preloader").text(cena_settings.no_results),e(".tbay-preloader").addClass("no-results")):(e(".tbay-preloader").empty(),e(".tbay-preloader").removeClass("no-results"))},open:function(a,t){e(a.target).parents(".tbay-search-form").removeClass("load"),e(a.target).parents(".tbay-search-form").addClass("active")},close:function(){}})}),e(document.body).on("cena_search_view_all",()=>{e(".search-view-all").on("click",function(){jQuery(this).parents("form").submit()})}),e(".tbay-preloader").on("click",function(){e(".tbay-preloader").empty(),e(this).parents(".tbay-search-form").removeClass("active").removeClass("load"),e(this).parents(".tbay-search-form").find("input[name=s]").val("")})})}(jQuery);