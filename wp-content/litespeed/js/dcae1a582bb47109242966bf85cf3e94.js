!function(t){"use strict";var a={init:function(){var a=this;t(".thumbnails-image .thumb-link").on("click",(function(a){a.preventDefault();var e=t(this).attr("href"),n=t(this).data("image");t(".woocommerce-main-image .featured-image").attr("href",n),t(".woocommerce-main-image .featured-image img").attr("src",e),t(".cloud-zoom").CloudZoom()})),a.initAjaxWishlist(),a.initAjaxRemoveMiniCart(),a.initAjaxAddToCart(),a.initBuyNow(),a.initChangeQtyPageSingle(),a.initAjaxShopDisplayModeGrid(),a.initAjaxShopDisplayModeList(),a.initsidebarMobile(),a.ProductCategoriesTabs(),a.ProductTabs(),cena_settings.ajax_update_quantity&&a.initChangeQtyPageCartUpdate()},ProductCategoriesTabs:function(){"undefined"!=typeof cena_settings&&this._initProductCategoriesTabs()},_initProductCategoriesTabs(){var a=!1;t(".tbay-product-categories-tabs-ajax.ajax-active").each((function(){t(this).find(".product-categories-tabs-title li a").off("click").on("click",(function(e){e.preventDefault();var n=t(this),i=n.parent().parent().data("atts"),o=n.data("value"),c=n.attr("href");if(!a&&!t(c).hasClass("active-content")){if(a=!0,i&&i.layout_type){if(!["grid","list","carousel","carousel-special","special"].includes(i.layout_type))return void console.warn("Invalid layout type:",i.layout_type)}t.ajax({url:cena_settings.ajaxurl,data:{atts:i,value:o,action:"cena_get_products_categories_tab_shortcode",nonce:cena_settings.nonce},dataType:"json",method:"POST",beforeSend:function(a){t(c).parent().addClass("load-ajax")},success:function(a){t(c).find(".tab-banner").length>0?t(c).append(a.html):t(c).prepend(a.html),t(c).parent().find(".current").removeClass("current"),t(c).parent().removeClass("load-ajax"),t(c).addClass("active-content"),t(c).addClass("current"),t(document.body).trigger("tbay_carousel_slick"),t(document.body).trigger("tbay_ajax_tabs_products"),t(document.body).trigger("cena_lazy_load_image")},error:function(){console.log("ajax error")},complete:function(){a=!1}})}}))}))},ProductTabs:function(){"undefined"!=typeof cena_settings&&this._initProductTabs()},_initProductTabs(){var a=!1;t(".tbay-product-tabs-ajax.ajax-active").each((function(){t(this).find(".product-tabs-title li a").off("click").on("click",(function(e){e.preventDefault();var n=t(this),i=n.parent().parent().data("atts"),o=n.data("value"),c=n.attr("href");a||t(c).hasClass("active-content")||(a=!0,t.ajax({url:cena_settings.ajaxurl,data:{atts:i,value:o,action:"cena_get_products_tab_shortcode",nonce:cena_settings.nonce},dataType:"json",method:"POST",beforeSend:function(a){t(c).parent().addClass("load-ajax")},success:function(a){t(c).html(a.html),t(c).parent().find(".current").removeClass("current"),t(c).parent().removeClass("load-ajax"),t(c).addClass("active-content"),t(c).addClass("current"),t(document.body).trigger("tbay_carousel_slick"),t(document.body).trigger("tbay_ajax_tabs_products"),t(document.body).trigger("cena_lazy_load_image")},error:function(){console.log("ajax error")},complete:function(){a=!1}}))}))}))},initAjaxWishlist:function(){t(document).on("yith_wcwl_reload_fragments",(function(){var a=t(".count_wishlist");t.ajax({url:yith_wcwl_l10n.ajax_url,data:{action:"yith_wcwl_update_wishlist_count"},dataType:"json",success:function(t){a.html(t.count)},beforeSend:function(){a.block()},complete:function(){a.unblock()}})}))},initAjaxRemoveMiniCart:function(){cena_settings.enable_ajax_add_to_cart&&t(document).on("click",".mini_cart_content a.remove",(function(a){a.preventDefault();var e=t(this).attr("data-product_id"),n=t(this).attr("data-cart_item_key"),i=t(this).parents(".mini_cart_item"),o=t(this).closest(".widget_shopping_cart_content");i.block({message:null,overlayCSS:{cursor:"none"}}),t.ajax({type:"POST",dataType:"json",url:wc_add_to_cart_params.ajax_url,data:{action:"product_remove",product_id:e,cart_item_key:n},beforeSend:function(){o.find(".mini_cart_content").append('<div class="ajax-loader-wapper"><div class="ajax-loader"></div></div>'),o.find(".mini_cart_content").fadeTo("slow",.3),a.stopPropagation()},success:function(n){if(n&&!n.error){var i=n.fragments;i&&t.each(i,(function(a,e){t(a).replaceWith(e)})),t(".add_to_cart_button.added").each((function(a){t(this).data("product_id")==e&&t(this).removeClass("added")})),a.stopPropagation()}}})}))},initAjaxAddToCart:function(){var t=null;jQuery("body").on("adding_to_cart",(function(a,e,n){t=n})),jQuery("body").on("added_to_cart",(function(a,e){if(t){jQuery("#tbay-cart-modal").modal();var n=cena_settings.ajaxurl+"?action=cena_add_to_cart_product&product_id="+t.product_id+"&nonce="+cena_settings.nonce;jQuery.get(n,(function(t,a){jQuery("#tbay-cart-modal .modal-body .modal-body-content").html(t)})),jQuery("#tbay-cart-modal").on("hidden.bs.modal",(function(){jQuery(this).find(".modal-body .modal-body-content").empty()}))}}))},initBuyNow:function(){t("body").on("click",".tbay-buy-now",(function(a){a.preventDefault();let e=t(this).closest("form.cart");e.find('[type="submit"]');e.find('input[name="cena_buy_now"]').val("1"),e.find(".single_add_to_cart_button").click()}))},initAjaxShopDisplayModeList:function(){t(".display-mode button.list").each((function(a){t(this).on("click",(function(){if(!t(this).hasClass("active")){var a=t(this),e={action:"cena_list_post_ajax",query:cena_settings.posts,nonce:cena_settings.nonce};return t.ajax({url:cena_settings.ajaxurl,data:e,type:"POST",beforeSend:function(t){a.closest("#content").find(".products").addClass("load-ajax")},success:function(e){if(e){a.parent().children().removeClass("active"),a.addClass("active"),a.closest("#content").find(".products > div").html(e),a.closest("#content").find("div.products").addClass("products-list").removeClass("products-grid").fadeIn(300),t(".woocommerce-product-gallery").each((function(){jQuery(this).wc_product_gallery()})),t(document.body).trigger("cena_lazy_load_image"),"undefined"!=typeof tawcvs_variation_swatches_form&&(t(".variations_form").tawcvs_variation_swatches_form(),t(document.body).trigger("tawcvs_initialized")),"undefined"!=typeof wc_add_to_cart_variation_params&&t(".variations_form").each((function(){t(this).wc_variation_form().find(".variations select:eq(0)").trigger("change")})),a.closest("#content").find(".products").removeClass("load-ajax"),t.fn.setCookie("display_mode","list",.1)}}}),!1}}))}))},initAjaxShopDisplayModeGrid:function(){t(".display-mode button.grid").each((function(a){t(this).on("click",(function(){if(!t(this).hasClass("active")){var a=t(this),e={action:"cena_grid_post_ajax",query:cena_settings.posts,nonce:cena_settings.nonce};return t.ajax({url:cena_settings.ajaxurl,data:e,type:"POST",beforeSend:function(t){a.closest("#content").find(".products").addClass("load-ajax")},success:function(e){if(e){a.parent().children().removeClass("active"),a.addClass("active"),a.closest("#content").find(".products > div").html(e),a.closest("#content").find("div.products").addClass("products-grid").removeClass("products-list").fadeIn(300),t(".woocommerce-product-gallery").each((function(){jQuery(this).wc_product_gallery()})),t(document.body).trigger("cena_lazy_load_image"),"undefined"!=typeof tawcvs_variation_swatches_form&&(t(".variations_form").tawcvs_variation_swatches_form(),t(document.body).trigger("tawcvs_initialized")),"undefined"!=typeof wc_add_to_cart_variation_params&&t(".variations_form").each((function(){t(this).wc_variation_form().find(".variations select:eq(0)").trigger("change")})),a.closest("#content").find(".products").removeClass("load-ajax"),t.fn.setCookie("display_mode","grid",.1)}}}),!1}}))}))},initChangeQtyPageCartUpdate:function(){t(document).on("change",".woocommerce-cart-form input.qty",(function(){t("[name='update_cart']").trigger("click")}))},initsidebarMobile:function(){t(document).on("click",".cena-sidebar-mobile-btn,.cena-close-side",(function(){t("body").toggleClass("show-sidebar")})),t(document).on("click",".close-side-widget",(function(){t("body").removeClass("show-sidebar")}))},initChangeQtyPageSingle:function(){t(document).on("click",".plus, .minus",(function(){var a=t(this).closest(".quantity").find(".qty"),e=parseFloat(a.val()),n=a.attr("max"),i=a.attr("min"),o=a.attr("step");e=e&&""!==e&&"NaN"!==e?e:0,n=""===n||"NaN"===n?"":n,i=""===i||"NaN"===i?0:i,o="any"===o||""===o||void 0===o||NaN===parseFloat(o)?1:o,t(this).is(".plus")?n&&(n==e||e>n)?a.val(n):a.val(e+parseFloat(o)):i&&(i==e||e<i)?a.val(i):e>0&&a.val(e-parseFloat(o)),a.trigger("change")}))}};t.fn.tbayIframe=function(a){var e=this,n=t.extend({classBtn:".tbay-modalButton",defaultW:640,defaultH:360},a);return t(n.classBtn).on("click",(function(a){var i=t(this).attr("data-tbayVideoFullscreen")||!1,o={src:t(this).attr("data-tbaySrc"),height:t(this).attr("data-tbayHeight")||n.defaultH,width:t(this).attr("data-tbayWidth")||n.defaultW};i&&(o.allowfullscreen=""),t(e).find("iframe").attr(o)})),this.on("hidden.bs.modal",(function(){t(this).find("iframe").html("").attr("src","")})),this},t(document).ready((function(){t("#productvideo").tbayIframe(),a.init()}))}(jQuery)
;