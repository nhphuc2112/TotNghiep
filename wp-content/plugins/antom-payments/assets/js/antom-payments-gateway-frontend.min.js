function get_card_icon_by_type(t){var e={"":"card-gray.svg",Unknown:"card-highlight.svg",Visa:"VISA.svg",Mastercard:"MasterCard.svg"};return void 0===e[t]?"card.svg":e[t]}function format_card_number(t){var e=jQuery,a=(a=e(t).val().replace(/\D/g,"")).substring(0,16);let r;r=""==a?get_card_icon_by_type(""):get_card_icon_by_type(get_card_type(a));var o=e(".antom-cards-container-item-line > .card-cover").find("img"),n=o.data("host");o.attr("src",n+r),a=a.replace(/(\d{4})(?=\d)/g,"$1 "),e(t).val(a)}function get_card_type(t){return/^4[0-9]{12}(?:[0-9]{3})?$/.test(t)?"Visa":/^5[1-5][0-9]{14}$/.test(t)?"Mastercard":"Unknown"}function format_expire_date(t,e){var a,r=jQuery;let o=r(t).val();2<=(o=2<(o=1===(o=(o=o.replace(/\D/g,"")).substring(0,4)).length&&2<=parseInt(o)?"0"+o:o).length?o.substring(0,2)+"/"+o.substring(2):o).length&&(12<(a=parseInt(o.substring(0,2)))&&(o="12"+o.substring(2)),0===a)&&(o="01"+o.substring(2)),r(t).val(o)}function format_cvc(t){var e=jQuery;let a=e(t).val();a=(a=a.replace(/\D/g,"")).substring(0,4),e(t).val(a.slice(0,4))}(r=>{function o(t,e="",a=!1){r(".woocommerce-notices-wrapper").first().html('<div class="woocommerce-error antom-errors">'+t+"</div>"),e&&r("."+e).html(t).removeClass("hide-error"),a&&r("html, body").animate({scrollTop:0},500)}function n(t){return t.replace(/<\/?[^>]+(>|$)/g,"")}function c(t=""){r("body").css("overflow","hidden"),t&&r("#antom-loading-mask").find("p").text(t),r("#antom-loading-mask").show()}function s(){r("body").css("overflow","auto"),r("#antom-loading-mask").hide()}r(document).ready(function(){0===r("#antom-loading-mask").length&&r("body").append('<div id="antom-loading-mask"><img style="width:30px;" src="'+antom_payment_gateways_settings.redirect_to_antom_loading_image_url+'" alt="Loading..."><p></p></div>'),r("body").on("change",'input[name="payment_method"]',function(){var t=r(this).val(),e=r(".antom-test-mode-warning");t.startsWith("antom_")?(is_antom_payment_gateway=!0,e.show()):e.hide()}),r(document).on("click","form.checkout #place_order",function(t){var e=r('input[name="payment_method"]:checked').val();let a=!1;(a=e.startsWith("antom_")?!0:a)&&(t.preventDefault(),c(antom_payment_gateways_settings.request_to_antom_payments_gateway),r.ajax({type:"POST",url:wc_checkout_params.checkout_url,data:r("form.checkout").serialize(),dataType:"json",beforeSend:function(){r("body").trigger("update_checkout")},success:function(e){try{"success"===e.result?(c(antom_payment_gateways_settings.redirect_to_antom_loading_description),antom_payment_gateways_settings.antom_is_mobile?(window.location.href=e.redirect_app_url,setTimeout(function(){document.hidden||document.webkitHidden?r("body").trigger("update_checkout"):window.location.href=e.redirect},3e3)):window.location.href=e.redirect):(e.result,s(),o(n(e.messages),"",!0))}catch(t){!0===e.reload?window.location.reload():(!0===e.refresh&&r(document.body).trigger("update_checkout"),s(),e.messages?o(n(e.messages),"",!0):o(wc_checkout_params.i18n_checkout_error))}},error:function(t,e,a){wc_checkout_form.detachUnloadEventsOnSubmit();"object"==typeof wc_checkout_params&&null!==wc_checkout_params&&wc_checkout_params.hasOwnProperty("i18n_checkout_error")&&"string"==typeof wc_checkout_params.i18n_checkout_error&&""!==wc_checkout_params.i18n_checkout_error.trim()&&(a=wc_checkout_params.i18n_checkout_error),wc_checkout_form.submit_error('<div class="woocommerce-error">'+a+"</div>")}}))})})})(jQuery);