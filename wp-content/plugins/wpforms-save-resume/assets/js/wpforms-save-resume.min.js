"use strict";var WPFormsSaveResume=window.WPFormsSaveResume||function(o,a,s){var r,i,n,t,m,d={init:function(){s(o).on("click",".wpforms-save-resume-button",d.showSaveResume).on("click",".wpforms-save-resume-disclaimer-back",d.goBack).on("click",".wpforms-save-resume-disclaimer-continue",d.showConfirmation).on("click",".wpforms-save-resume-shortcode-copy",d.copyShortcodeToClipboard).on("change",".wpforms-field-email input[type=email]",d.validateEmail),s(".wpforms-form").on("wpformsAjaxSubmitFailed",d.submitFailed)},showSaveResume(e){r=s(e.target).closest("form.wpforms-form"),i=r.parent().parent(),m=r.data("formid"),t=r.find(".wpforms-submit-container").is(":visible"),d.scrollToTop(r.offset().top-75,750),1<=s("#wpforms-save-resume-disclaimer-"+m).length?d.showDisclaimer(e):d.showConfirmation(e)},prepareData(e){(n=new FormData(e.get(0))).append("action","wpforms_save_resume"),n.append("page_url",a.location.href),e.data("token")&&0===s(".wpforms-token",e).length&&n.append("wpforms[token]",e.data("token"))},showDisclaimer(e){e.preventDefault(),d.prepareData(r),r.find(".wpforms-field-container, .wpforms-submit-container, .wpforms-recaptcha-container, .wpforms-page-indicator, .wpforms-error-container, .wpforms-save-resume-expired-message").hide(),d.hideExpiredMessage(),s("#wpforms-save-resume-disclaimer-"+m).detach().insertAfter(r).show()},showConfirmation(e){e.preventDefault(),s("#wpforms-save-resume-disclaimer-"+m).hide(),d.prepareData(r),r.find(".wpforms-field-container, .wpforms-submit-container, .wpforms-recaptcha-container, .wpforms-page-indicator, .wpforms-error-container").hide(),d.hideExpiredMessage(),s("#wpforms-save-resume-confirmation-"+m).detach().insertAfter(r).show(),d.sendData(e)},sendData(){var e;n&&m&&(d.debug("The hash is generating..."),e={type:"post",dataType:"json",url:wpforms_save_resume.ajaxurl,data:n,cache:!1,contentType:!1,processData:!1},s.ajax(e).done(function(e){!1!==e.success&&e.data.hash.length?(d.debug("The hash has generated successfully"),i.find(".wpforms-save-resume-entry-id").val(e.data.entry_id),i.find(".wpforms-save-resume-shortcode").val(e.data.hash),i.find(".wpforms-submit").prop("disabled",!1)):(d.debug("The hash hasn't generated"),r.find(".wpforms-error-container").remove(),r.prepend('<div class="wpforms-error-container">'+wpforms_settings.save_resume_hash_error+"</div>"),s("#wpforms-save-resume-confirmation-"+m).hide(),r.find(".wpforms-field-container, .wpforms-submit-container, .wpforms-recaptcha-container, .wpforms-page-indicator, .wpforms-error-container").show(),wpforms.scrollToError(r.find(".wpforms-error-container")))}),n=new FormData)},goBack(e){e.preventDefault();e=r.find(".wpforms-submit-container");s("#wpforms-save-resume-disclaimer-"+m).hide(),d.hideExpiredMessage(),!1!==t&&e.show(),r.find(".wpforms-field-container, .wpforms-recaptcha-container, .wpforms-page-indicator").show()},copyShortcodeToClipboard:function(){var e=i.find(".wpforms-save-resume-shortcode"),r=i.find(".wpforms-save-resume-shortcode-copy"),s=(e.prop("disabled",!1).select().prop("disabled",!0),o.execCommand("copy"),r.find("i"));s.removeClass("fa-files-o").addClass("fa-check"),a.setTimeout(function(){s.removeClass("fa-check").addClass("fa-files-o")},2500),d.debug("The link has copied successfully")},validateEmail:function(e){e.preventDefault(),s(r).validate({errorClass:"wpforms-error",validClass:"wpforms-valid",rules:{email:{required:!0,email:!0}},messages:{email:wpforms_settings.val_email},submitHandler:function(e){e.submit()}})},hideExpiredMessage(){var e=s(".wpforms-save-resume-expired-message");0<e.length&&(e.hide(),s(".wpforms-save-resume-form-hidden").show())},scrollToTop:function(e,r){r=r||1e3,s("html, body").animate({scrollTop:parseInt(e,10)},{duration:r})},debug:function(e){a.location.hash&&"#wpformsfadebug"===a.location.hash&&console.log("WPForms S&R: "+e)},submitFailed:function(e,r){r.data.save_resume_error&&((r=s(e.target)).find(".wpforms-field-container").hide(),r.find(".wpforms-submit-container").hide())}};return d}(document,window,jQuery);WPFormsSaveResume.init();